/**
 * Minified by jsDelivr using Terser v5.15.1.
 * Original file: /npm/uikit@3.16.12/src/js/mixin/internal/animate-fade.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{getRows}from"../../core/margin";import{addClass,children,css,hasClass,height,isInView,once,removeClass,sortBy,toNumber,Transition}from"uikit-util";const clsLeave="uk-transition-leave",clsEnter="uk-transition-enter";export default function fade(t,e,n,i=0){const s=transitionIndex(e,!0),a={opacity:1},r={opacity:0},o=t=>()=>s===transitionIndex(e)?t():Promise.reject(),c=o((async()=>{addClass(e,clsLeave),await Promise.all(getTransitionNodes(e).map(((t,e)=>new Promise((s=>setTimeout((()=>Transition.start(t,r,n/2,"ease").then(s)),e*i)))))),removeClass(e,clsLeave)})),l=o((async()=>{const o=height(e);addClass(e,clsEnter),t(),css(children(e),{opacity:0}),await awaitFrame();const c=children(e),l=height(e);css(e,"alignContent","flex-start"),height(e,o);const d=getTransitionNodes(e);css(c,r);const m=d.map((async(t,e)=>{await awaitTimeout(e*i),await Transition.start(t,a,n/2,"ease")}));o!==l&&m.push(Transition.start(e,{height:l},n/2+d.length*i,"ease")),await Promise.all(m).then((()=>{removeClass(e,clsEnter),s===transitionIndex(e)&&(css(e,{height:"",alignContent:""}),css(c,{opacity:""}),delete e.dataset.transition)}))}));return hasClass(e,clsLeave)?waitTransitionend(e).then(l):hasClass(e,clsEnter)?waitTransitionend(e).then(c).then(l):c().then(l)}function transitionIndex(t,e){return e&&(t.dataset.transition=1+transitionIndex(t)),toNumber(t.dataset.transition)||0}function waitTransitionend(t){return Promise.all(children(t).filter(Transition.inProgress).map((t=>new Promise((e=>once(t,"transitionend transitioncanceled",e))))))}function getTransitionNodes(t){return getRows(children(t)).reduce(((t,e)=>t.concat(sortBy(e.filter((t=>isInView(t))),"offsetLeft"))),[])}function awaitFrame(){return new Promise((t=>requestAnimationFrame(t)))}function awaitTimeout(t){return new Promise((e=>setTimeout(e,t)))}
//# sourceMappingURL=/sm/3737ab43df6652507685896bc6ec2b884d0332634ea39639fcb14c6d98f48f56.map