/**
 * Minified by jsDelivr using Terser v5.15.1.
 * Original file: /npm/uikit@3.16.12/src/js/core/scrollspy.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{intersection}from"../api/observables";import{$$,css,filter,data as getData,once,removeClass,removeClasses,toggleClass,trigger}from"uikit-util";export default{args:"cls",props:{cls:String,target:String,hidden:Boolean,margin:String,repeat:Boolean,delay:Number},data:()=>({cls:"",target:!1,hidden:!0,margin:"-1px",repeat:!1,delay:0,inViewClass:"uk-scrollspy-inview"}),computed:{elements:({target:e},t)=>e?$$(e,t):[t]},watch:{elements(e){this.hidden&&css(filter(e,`:not(.${this.inViewClass})`),"opacity",0)}},connected(){this.elementData=new Map},disconnected(){for(const[e,t]of this.elementData.entries())removeClass(e,this.inViewClass,t?.cls||"");delete this.elementData},observe:intersection({target:({elements:e})=>e,handler(e){const t=this.elementData;for(const{target:s,isIntersecting:i}of e){t.has(s)||t.set(s,{cls:getData(s,"uk-scrollspy-class")||this.cls});const e=t.get(s);!this.repeat&&e.show||(e.show=i)}this.$emit()},options:e=>({rootMargin:e.margin}),args:{intersecting:!1}}),update:[{write(e){for(const[t,s]of this.elementData.entries())!s.show||s.inview||s.queued?!s.show&&s.inview&&!s.queued&&this.repeat&&this.toggle(t,!1):(s.queued=!0,e.promise=(e.promise||Promise.resolve()).then((()=>new Promise((e=>setTimeout(e,this.delay))))).then((()=>{this.toggle(t,!0),setTimeout((()=>{s.queued=!1,this.$emit()}),300)})))}}],methods:{toggle(e,t){const s=this.elementData.get(e);if(s){if(s.off?.(),css(e,"opacity",!t&&this.hidden?0:""),toggleClass(e,this.inViewClass,t),toggleClass(e,s.cls),/\buk-animation-/.test(s.cls)){const i=()=>removeClasses(e,"uk-animation-[\\w-]+");t?s.off=once(e,"animationcancel animationend",i):i()}trigger(e,t?"inview":"outview"),s.inview=t,this.$update(e)}}}};
//# sourceMappingURL=/sm/96ba8ae659e126bb71fe59c2acb2b1d57ecc393ac7d0bf79f0699e0a1eb11cd9.map