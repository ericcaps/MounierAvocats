/**
 * Minified by jsDelivr using Terser v5.15.1.
 * Original file: /npm/uikit@3.16.12/src/js/core/sticky.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import Class from"../mixin/class";import Media from"../mixin/media";import{resize,scroll}from"../api/observables";import{$,addClass,after,Animation,before,clamp,css,height as getHeight,offset as getOffset,intersectRect,isNumeric,isString,isVisible,noop,offsetPosition,parent,query,remove,removeClass,replaceClass,toFloat,toggleClass,toPx,trigger,within}from"uikit-util";export default{mixins:[Class,Media],props:{position:String,top:null,bottom:null,start:null,end:null,offset:String,overflowFlip:Boolean,animation:String,clsActive:String,clsInactive:String,clsFixed:String,clsBelow:String,selTarget:String,showOnUp:Boolean,targetOffset:Number},data:{position:"top",top:!1,bottom:!1,start:!1,end:!1,offset:0,overflowFlip:!1,animation:"",clsActive:"uk-active",clsInactive:"",clsFixed:"uk-sticky-fixed",clsBelow:"uk-sticky-below",selTarget:"",showOnUp:!1,targetOffset:!1},computed:{selTarget:({selTarget:t},i)=>t&&$(t,i)||i},connected(){this.start=coerce(this.start||this.top),this.end=coerce(this.end||this.bottom),this.placeholder=$("+ .uk-sticky-placeholder",this.$el)||$('<div class="uk-sticky-placeholder"></div>'),this.isFixed=!1,this.setActive(!1)},disconnected(){this.isFixed&&(this.hide(),removeClass(this.selTarget,this.clsInactive)),reset(this.$el),remove(this.placeholder),this.placeholder=null},observe:[resize({handler(){!this.isFixed&&this.$emit("resize")}}),resize({target:()=>[document.documentElement]}),scroll()],events:[{name:"resize",el:()=>[window,window.visualViewport],handler(){this.$emit("resizeViewport")}},{name:"load hashchange popstate",el:()=>window,filter(){return!1!==this.targetOffset},handler(){const{scrollingElement:t}=document;location.hash&&0!==t.scrollTop&&setTimeout((()=>{const i=getOffset($(location.hash)),e=getOffset(this.$el);this.isFixed&&intersectRect(i,e)&&(t.scrollTop=i.top-e.height-toPx(this.targetOffset,"height",this.placeholder)-toPx(this.offset,"height",this.placeholder))}))}}],update:[{read({height:t,width:i,margin:e,sticky:s},o){if(this.inactive=!this.matchMedia||!isVisible(this.$el),this.inactive)return;const h=this.isFixed&&o.has("resize")&&!s;h&&(preventTransition(this.selTarget),this.hide()),this.active||(({height:t,width:i}=getOffset(this.$el)),e=css(this.$el,"margin")),h&&this.show();const l=toPx("100vh","height"),r=getHeight(window),n=document.scrollingElement.scrollHeight-l;let a=this.position;this.overflowFlip&&t>l&&(a="top"===a?"bottom":"top");const c=this.isFixed?this.placeholder:this.$el;let d=toPx(this.offset,"height",s?this.$el:c);"bottom"===a&&(t<r||this.overflowFlip)&&(d+=r-t);const p=this.overflowFlip?0:Math.max(0,t+d-l),f=getOffset(c).top,m=getOffset(this.$el).height,g=(!1===this.start?f:parseProp(this.start,this.$el,f))-d,v=!1===this.end?n:Math.min(n,parseProp(this.end,this.$el,f+t,!0)-m-d+p);return s=n&&!this.showOnUp&&g+d===f&&v===Math.min(n,parseProp("!*",this.$el,0,!0)-m-d+p)&&"visible"===css(parent(this.$el),"overflowY"),{start:g,end:v,offset:d,overflow:p,topOffset:f,height:t,elHeight:m,width:i,margin:e,top:offsetPosition(c)[0],sticky:s}},write({height:t,width:i,margin:e,offset:s,sticky:o}){if((this.inactive||o||!this.isFixed)&&reset(this.$el),this.inactive)return;o&&(t=i=e=0,css(this.$el,{position:"sticky",top:s}));const{placeholder:h}=this;css(h,{height:t,width:i,margin:e}),within(h,document)||(h.hidden=!0),(o?before:after)(this.$el,h)},events:["resize","resizeViewport"]},{read({scroll:t=0,dir:i="down",overflow:e,overflowScroll:s=0,start:o,end:h}){const l=document.scrollingElement.scrollTop;return{dir:t<=l?"down":"up",prevDir:i,scroll:l,prevScroll:t,offsetParentTop:getOffset((this.isFixed?this.placeholder:this.$el).offsetParent).top,overflowScroll:clamp(s+clamp(l,o,h)-clamp(t,o,h),0,e)}},write(t,i){const e=i.has("scroll"),{initTimestamp:s=0,dir:o,prevDir:h,scroll:l,prevScroll:r=0,top:n,start:a,topOffset:c,height:d}=t;if(l<0||l===r&&e||this.showOnUp&&!e&&!this.isFixed)return;const p=Date.now();if((p-s>300||o!==h)&&(t.initScroll=l,t.initTimestamp=p),!(this.showOnUp&&!this.isFixed&&Math.abs(t.initScroll-l)<=30&&Math.abs(r-l)<=10))if(this.inactive||l<a||this.showOnUp&&(l<=a||"down"===o&&e||"up"===o&&!this.isFixed&&l<=c+d)){if(!this.isFixed)return void(Animation.inProgress(this.$el)&&n>l&&(Animation.cancel(this.$el),this.hide()));this.animation&&l>c?(Animation.cancel(this.$el),Animation.out(this.$el,this.animation).then((()=>this.hide()),noop)):this.hide()}else this.isFixed?this.update():this.animation&&l>c?(Animation.cancel(this.$el),this.show(),Animation.in(this.$el,this.animation).catch(noop)):(preventTransition(this.selTarget),this.show())},events:["resize","resizeViewport","scroll"]}],methods:{show(){this.isFixed=!0,this.update(),this.placeholder.hidden=!1},hide(){const{offset:t,sticky:i}=this._data;this.setActive(!1),removeClass(this.$el,this.clsFixed,this.clsBelow),i?css(this.$el,"top",t):css(this.$el,{position:"",top:"",width:"",marginTop:""}),this.placeholder.hidden=!0,this.isFixed=!1},update(){let{width:t,scroll:i=0,overflow:e,overflowScroll:s=0,start:o,end:h,offset:l,topOffset:r,height:n,elHeight:a,offsetParentTop:c,sticky:d}=this._data;const p=0!==o||i>o;if(!d){let e="fixed";i>h&&(l+=h-c,e="absolute"),css(this.$el,{position:e,width:t}),css(this.$el,"marginTop",0,"important")}e&&(l-=s),css(this.$el,"top",l),this.setActive(p),toggleClass(this.$el,this.clsBelow,i>r+(d?Math.min(n,a):n)),addClass(this.$el,this.clsFixed)},setActive(t){const i=this.active;this.active=t,t?(replaceClass(this.selTarget,this.clsInactive,this.clsActive),i!==t&&trigger(this.$el,"active")):(replaceClass(this.selTarget,this.clsActive,this.clsInactive),i!==t&&trigger(this.$el,"inactive"))}}};function parseProp(t,i,e,s){if(!t)return 0;if(isNumeric(t)||isString(t)&&t.match(/^-?\d/))return e+toPx(t,"height",i,!0);{const e=!0===t?parent(i):query(t,i);return getOffset(e).bottom-(s&&e&&within(i,e)?toFloat(css(e,"paddingBottom")):0)}}function coerce(t){return"true"===t||"false"!==t&&t}function reset(t){css(t,{position:"",top:"",marginTop:"",width:""})}function preventTransition(t){css(t,"transition","0s"),requestAnimationFrame((()=>css(t,"transition","")))}
//# sourceMappingURL=/sm/226ea941e2a57d636ab132fdab975d730d2e0cf1d75368abcf2a1260bae7c86e.map