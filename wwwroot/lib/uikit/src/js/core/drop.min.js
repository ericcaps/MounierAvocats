/**
 * Minified by jsDelivr using Terser v5.15.1.
 * Original file: /npm/uikit@3.16.12/src/js/core/drop.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{lazyload}from"../api/observables";import Position from"../mixin/position";import Container from"../mixin/container";import Togglable from"../mixin/togglable";import{keyMap}from"../util/keys";import{preventBackgroundScroll}from"../mixin/internal/scroll";import{addClass,append,apply,attr,css,hasClass,includes,isSameSiteAnchor,isTouch,matches,MouseTracker,observeResize,offset,offsetViewport,on,once,overflowParents,parent,pick,pointerCancel,pointerDown,pointerEnter,pointerLeave,pointerUp,query,removeClass,within}from"uikit-util";export let active;export default{mixins:[Container,Position,Togglable],args:"pos",props:{mode:"list",toggle:Boolean,boundary:Boolean,boundaryX:Boolean,boundaryY:Boolean,target:Boolean,targetX:Boolean,targetY:Boolean,stretch:Boolean,delayShow:Number,delayHide:Number,autoUpdate:Boolean,clsDrop:String,animateOut:Boolean,bgScroll:Boolean},data:{mode:["click","hover"],toggle:"- *",boundary:!1,boundaryX:!1,boundaryY:!1,target:!1,targetX:!1,targetY:!1,stretch:!1,delayShow:0,delayHide:800,autoUpdate:!0,clsDrop:!1,animateOut:!1,bgScroll:!0,animation:["uk-animation-fade"],cls:"uk-open",container:!1},computed:{boundary:({boundary:e,boundaryX:t,boundaryY:i},s)=>[query(t||e,s)||window,query(i||e,s)||window],target({target:e,targetX:t,targetY:i},s){return t=t||e||this.targetEl,i=i||e||this.targetEl,[!0===t?window:query(t,s),!0===i?window:query(i,s)]}},created(){this.tracker=new MouseTracker},beforeConnect(){this.clsDrop=this.$props.clsDrop||`uk-${this.$options.name}`},connected(){addClass(this.$el,"uk-drop",this.clsDrop),this.toggle&&!this.targetEl&&(this.targetEl=createToggleComponent(this)),this._style=pick(this.$el.style,["width","height"])},disconnected(){this.isActive()&&(this.hide(!1),active=null),css(this.$el,this._style)},observe:lazyload({target:({toggle:e,$el:t})=>query(e,t),targets:({$el:e})=>e}),events:[{name:"click",delegate:()=>".uk-drop-close",handler(e){e.preventDefault(),this.hide(!1)}},{name:"click",delegate:()=>'a[href*="#"]',handler({defaultPrevented:e,current:t}){const{hash:i}=t;!e&&i&&isSameSiteAnchor(t)&&!within(i,this.$el)&&this.hide(!1)}},{name:"beforescroll",handler(){this.hide(!1)}},{name:"toggle",self:!0,handler(e,t){e.preventDefault(),this.isToggled()?this.hide(!1):this.show(t?.$el,!1)}},{name:"toggleshow",self:!0,handler(e,t){e.preventDefault(),this.show(t?.$el)}},{name:"togglehide",self:!0,handler(e){e.preventDefault(),matches(this.$el,":focus,:hover")||this.hide()}},{name:`${pointerEnter} focusin`,filter(){return includes(this.mode,"hover")},handler(e){isTouch(e)||this.clearTimers()}},{name:`${pointerLeave} focusout`,filter(){return includes(this.mode,"hover")},handler(e){!isTouch(e)&&e.relatedTarget&&this.hide()}},{name:"toggled",self:!0,handler(e,t){attr(this.targetEl,"aria-expanded",!!t||null),t&&(this.clearTimers(),this.position())}},{name:"show",self:!0,handler(){active=this,this.tracker.init();const e=[listenForResize(this),listenForEscClose(this),listenForBackgroundClose(this),this.autoUpdate&&listenForScroll(this),!this.bgScroll&&preventBackgroundScroll(this.$el)];once(this.$el,"hide",(()=>e.forEach((e=>e&&e()))),{self:!0})}},{name:"beforehide",self:!0,handler(){this.clearTimers()}},{name:"hide",handler({target:e}){this.$el===e?(active=this.isActive()?null:active,this.tracker.cancel()):active=null===active&&within(e,this.$el)&&this.isToggled()?this:active}}],update:{write(){this.isToggled()&&!hasClass(this.$el,this.clsEnter)&&this.position()}},methods:{show(e=this.targetEl,t=!0){if(this.isToggled()&&e&&this.targetEl&&e!==this.targetEl&&this.hide(!1,!1),this.targetEl=e,this.clearTimers(),!this.isActive()){if(active){if(t&&active.isDelaying)return void(this.showTimer=setTimeout((()=>matches(e,":hover")&&this.show()),10));let i;for(;active&&i!==active&&!within(this.$el,active.$el);)i=active,active.hide(!1,!1)}this.container&&parent(this.$el)!==this.container&&append(this.container,this.$el),this.showTimer=setTimeout((()=>this.toggleElement(this.$el,!0)),t&&this.delayShow||0)}},hide(e=!0,t=!0){const i=()=>this.toggleElement(this.$el,!1,this.animateOut&&t);this.clearTimers(),this.isDelaying=getPositionedElements(this.$el).some((e=>this.tracker.movesTo(e))),e&&this.isDelaying?this.hideTimer=setTimeout(this.hide,50):e&&this.delayHide?this.hideTimer=setTimeout(i,this.delayHide):i()},clearTimers(){clearTimeout(this.showTimer),clearTimeout(this.hideTimer),this.showTimer=null,this.hideTimer=null,this.isDelaying=!1},isActive(){return active===this},position(){removeClass(this.$el,"uk-drop-stack"),css(this.$el,this._style),this.$el.hidden=!0;const e=this.target.map((e=>getViewport(this.$el,e))),t=this.getViewportOffset(this.$el),i=[[0,["x","width","left","right"]],[1,["y","height","top","bottom"]]];for(const[s,[o,r]]of i)this.axis!==o&&includes([o,!0],this.stretch)&&css(this.$el,{[r]:Math.min(offset(this.boundary[s])[r],e[s][r]-2*t),[`overflow-${o}`]:"auto"});const s=e[0].width-2*t;this.$el.hidden=!1,css(this.$el,"maxWidth",""),this.$el.offsetWidth>s&&addClass(this.$el,"uk-drop-stack"),css(this.$el,"maxWidth",s),this.positionAt(this.$el,this.target,this.boundary);for(const[s,[o,r,n,a]]of i)if(this.axis===o&&includes([o,!0],this.stretch)){const i=Math.abs(this.getPositionOffset(this.$el)),l=offset(this.target[s]),h=offset(this.$el);css(this.$el,{[r]:(l[n]>h[n]?l[n]-Math.max(offset(this.boundary[s])[n],e[s][n]+t):Math.min(offset(this.boundary[s])[a],e[s][a]-t)-l[a])-i,[`overflow-${o}`]:"auto"}),this.positionAt(this.$el,this.target,this.boundary)}}}};function getPositionedElements(e){const t=[];return apply(e,(e=>"static"!==css(e,"position")&&t.push(e))),t}function getViewport(e,t){return offsetViewport(overflowParents(t).find((t=>within(e,t))))}function createToggleComponent(e){const{$el:t}=e.$create("toggle",query(e.toggle,e.$el),{target:e.$el,mode:e.mode});return attr(t,"aria-haspopup",!0),t}function listenForResize(e){const t=()=>e.$emit(),i=on(window,"resize",t),s=observeResize(overflowParents(e.$el).concat(e.target),t);return()=>{s.disconnect(),i()}}function listenForScroll(e){return on([document,...overflowParents(e.$el)],"scroll",(()=>e.$emit()),{passive:!0})}function listenForEscClose(e){return on(document,"keydown",(t=>{t.keyCode===keyMap.ESC&&e.hide(!1)}))}function listenForBackgroundClose(e){return on(document,pointerDown,(({target:t})=>{within(t,e.$el)||once(document,`${pointerUp} ${pointerCancel} scroll`,(({defaultPrevented:i,type:s,target:o})=>{i||s!==pointerUp||t!==o||e.targetEl&&within(t,e.targetEl)||e.hide(!1)}),!0)}))}
//# sourceMappingURL=/sm/8772f4b0ddcb228dbcfd9ac8f827764eee45171cfa44508855ad1eba2dfb74e2.map