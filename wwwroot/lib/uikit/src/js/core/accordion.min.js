/**
 * Minified by jsDelivr using Terser v5.15.1.
 * Original file: /npm/uikit@3.16.12/src/js/core/accordion.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import Class from"../mixin/class";import Togglable from"../mixin/togglable";import{keyMap}from"../util/keys";import{generateId}from"../api/instance";import{lazyload}from"../api/observables";import{$,$$,attr,children,css,dimensions,filter,getIndex,hasClass,includes,index,isTag,scrollParents,sumBy,toFloat,toggleClass,Transition,unwrap,within,wrapAll}from"uikit-util";export default{mixins:[Class,Togglable],props:{animation:Boolean,targets:String,active:null,collapsible:Boolean,multiple:Boolean,toggle:String,content:String,offset:Number},data:{targets:"> *",active:!1,animation:!0,collapsible:!0,multiple:!1,clsOpen:"uk-open",toggle:"> .uk-accordion-title",content:"> .uk-accordion-content",offset:0},computed:{items:({targets:t},e)=>$$(t,e),toggles({toggle:t}){return this.items.map((e=>$(t,e)))},contents({content:t}){return this.items.map((e=>e._wrapper?.firstElementChild||$(t,e)))}},watch:{items(t,e){if(e||hasClass(t,this.clsOpen))return;const i=!1!==this.active&&t[Number(this.active)]||!this.collapsible&&t[0];i&&this.toggle(i,!1)},toggles(){this.$emit()},contents(t){for(const e of t){const t=hasClass(this.items.find((t=>within(e,t))),this.clsOpen);hide(e,!t)}this.$emit()}},observe:lazyload(),events:[{name:"click keydown",delegate(){return`${this.targets} ${this.$props.toggle}`},async handler(t){"keydown"===t.type&&t.keyCode!==keyMap.SPACE||(t.preventDefault(),this._off?.(),this._off=keepScrollPosition(t.target),await this.toggle(index(this.toggles,t.current)),this._off())}},{name:"shown hidden",self:!0,delegate(){return this.targets},handler(){this.$emit()}}],update(){const t=filter(this.items,`.${this.clsOpen}`);for(const e in this.items){const i=this.toggles[e],s=this.contents[e];if(!i||!s)continue;i.id=generateId(this,i,`-title-${e}`),s.id=generateId(this,s,`-content-${e}`);const n=includes(t,this.items[e]);attr(i,{role:isTag(i,"a")?"button":null,"aria-controls":s.id,"aria-expanded":n,"aria-disabled":!this.collapsible&&t.length<2&&n}),attr(s,{role:"region","aria-labelledby":i.id}),isTag(s,"ul")&&attr(children(s),"role","presentation")}},methods:{async toggle(t,e){let i=[t=this.items[getIndex(t,this.items)]];const s=filter(this.items,`.${this.clsOpen}`);this.multiple||includes(s,i[0])||(i=i.concat(s)),!this.collapsible&&s.length<2&&includes(s,t)||await Promise.all(i.map((t=>this.toggleElement(t,!includes(s,t),((t,i)=>{if(toggleClass(t,this.clsOpen,i),!1!==e&&this.animation)return transition(t,i,this);hide($(this.content,t),!i)})))))}}};function hide(t,e){t&&(t.hidden=e)}async function transition(t,e,{content:i,duration:s,velocity:n,transition:o}){i=t._wrapper?.firstElementChild||$(i,t),t._wrapper||(t._wrapper=wrapAll(i,"<div>"));const a=t._wrapper;css(a,"overflow","hidden");const l=toFloat(css(a,"height"));await Transition.cancel(a),hide(i,!1);const r=sumBy(["marginTop","marginBottom"],(t=>css(i,t)))+dimensions(i).height,c=l/r;s=(n*r+s)*(e?1-c:c),css(a,"height",l),await Transition.start(a,{height:e?r:0},s,o),unwrap(i),delete t._wrapper,e||hide(i,!0)}function keepScrollPosition(t){const[e]=scrollParents(t,!0);let i;return function s(){i=requestAnimationFrame((()=>{const{top:i}=t.getBoundingClientRect();i<0&&(e.scrollTop+=i),s()}))}(),()=>requestAnimationFrame((()=>cancelAnimationFrame(i)))}
//# sourceMappingURL=/sm/321a2748594b3de4d3c8d6ea57486344247a2c218ddb8a6505b47b6e61ac59b3.map