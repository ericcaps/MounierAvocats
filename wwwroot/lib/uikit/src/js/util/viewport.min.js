/**
 * Minified by jsDelivr using Terser v5.15.1.
 * Original file: /npm/uikit@3.16.12/src/js/util/viewport.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{css}from"./style";import{isVisible,parents}from"./filter";import{offset,offsetPosition}from"./dimensions";import{clamp,findIndex,includes,intersectRect,isWindow,toFloat,toWindow,ucfirst}from"./lang";export function isInView(t,e=0,o=0){return!!isVisible(t)&&intersectRect(...overflowParents(t).map((t=>{const{top:i,left:r,bottom:s,right:n}=offsetViewport(t);return{top:i-e,left:r-o,bottom:s+e,right:n+o}})).concat(offset(t)))}export function scrollIntoView(t,{offset:e=0}={}){const o=isVisible(t)?scrollParents(t,!1,["hidden"]):[];return o.reduce(((i,r,s)=>{const{scrollTop:n,scrollHeight:l,offsetHeight:c}=r,f=offsetViewport(r),p=l-f.height,{height:a,top:h}=o[s-1]?offsetViewport(o[s-1]):offset(t);let u=Math.ceil(h-f.top-e+n);return e>0&&c<a+e?u+=e:e=0,u>p?(e-=u-p,u=p):u<0&&(e-=u,u=0),()=>function(t,e){return new Promise((o=>{const i=t.scrollTop,r=(s=Math.abs(e),40*Math.pow(s,.375));var s;const n=Date.now();!function s(){const l=(c=clamp((Date.now()-n)/r),.5*(1-Math.cos(Math.PI*c)));var c;t.scrollTop=i+e*l,1===l?o():requestAnimationFrame(s)}()}))}(r,u-n).then(i)}),(()=>Promise.resolve()))()}export function scrolledOver(t,e=0,o=0){if(!isVisible(t))return 0;const[i]=scrollParents(t,!0),{scrollHeight:r,scrollTop:s}=i,{height:n}=offsetViewport(i),l=r-n,c=offsetPosition(t)[0]-offsetPosition(i)[0],f=Math.max(0,c-n+e),p=Math.min(l,c+t.offsetHeight-o);return clamp((s-f)/(p-f))}export function scrollParents(t,e=!1,o=[]){const i=scrollingElement(t);let r=parents(t).reverse();r=r.slice(r.indexOf(i)+1);const s=findIndex(r,(t=>"fixed"===css(t,"position")));return~s&&(r=r.slice(s)),[i].concat(r.filter((t=>css(t,"overflow").split(" ").some((t=>includes(["auto","scroll",...o],t)))&&(!e||t.scrollHeight>offsetViewport(t).height)))).reverse()}export function overflowParents(t){return scrollParents(t,!1,["hidden","clip"])}export function offsetViewport(t){const e=toWindow(t),{visualViewport:o,document:{documentElement:i}}=e;let r=t===scrollingElement(t)?e:t;if(isWindow(r)&&o){let{height:t,width:e,scale:i,pageTop:r,pageLeft:s}=o;return t=Math.round(t*i),e=Math.round(e*i),{height:t,width:e,top:r,left:s,bottom:r+t,right:s+e}}let s=offset(r);if("inline"===css(r,"display"))return s;for(let[t,e,o,n]of[["width","x","left","right"],["height","y","top","bottom"]])isWindow(r)?r=i:s[o]+=toFloat(css(r,`border-${o}-width`)),s[t]=s[e]=r[`client${ucfirst(t)}`],s[n]=s[t]+s[o];return s}function scrollingElement(t){return toWindow(t).document.scrollingElement}
//# sourceMappingURL=/sm/831052b89e2ec0c431a9a183afe4b936f8e04700f0f77d5ea9c2babd4d4157d1.map