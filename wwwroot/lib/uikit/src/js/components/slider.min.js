/**
 * Minified by jsDelivr using Terser v5.15.1.
 * Original file: /npm/uikit@3.16.12/src/js/components/slider.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import Class from"../mixin/class";import{resize}from"../api/observables";import Slider,{speedUp}from"../mixin/slider";import SliderReactive from"../mixin/slider-reactive";import SliderPreload from"./internal/slider-preload";import Transitioner,{getMax,getWidth}from"./internal/slider-transitioner";import{$,$$,addClass,attr,children,css,data,dimensions,findIndex,getIndex,includes,isVisible,last,selFocusable,sumBy,toFloat,toggleClass,toNumber}from"uikit-util";export default{mixins:[Class,Slider,SliderReactive,SliderPreload],props:{center:Boolean,sets:Boolean},data:{center:!1,sets:!1,attrItem:"uk-slider-item",selList:".uk-slider-items",selNav:".uk-slider-nav",clsContainer:"uk-slider-container",Transitioner:Transitioner},computed:{avgWidth(){return getWidth(this.list)/this.length},finite({finite:t}){return t||isFinite(this.list,this.center)},maxIndex(){if(!this.finite||this.center&&!this.sets)return this.length-1;if(this.center)return last(this.sets);let t=0;const i=getMax(this.list),s=findIndex(this.slides,(s=>{if(t>=i)return!0;t+=dimensions(s).width}));return~s?s:this.length-1},sets({sets:t}){if(!t)return;let i=0;const s=[],e=dimensions(this.list).width;for(let t=0;t<this.length;t++){const n=dimensions(this.slides[t]).width;i+n>e&&(i=0),this.center?i<e/2&&i+n+dimensions(this.slides[+t+1]).width/2>e/2&&(s.push(+t),i=e/2-n/2):0===i&&s.push(Math.min(+t,this.maxIndex)),i+=n}return s.length?s:void 0},transitionOptions(){return{center:this.center,list:this.list}},slides(){return children(this.list).filter(isVisible)}},connected(){toggleClass(this.$el,this.clsContainer,!$(`.${this.clsContainer}`,this.$el))},observe:resize({target:({slides:t})=>t}),update:{write(){for(const t of this.navItems){const i=toNumber(data(t,this.attrItem));!1!==i&&(t.hidden=!this.maxIndex||i>this.maxIndex||this.sets&&!includes(this.sets,i))}!this.length||this.dragging||this.stack.length||(this.reorder(),this._translate(1)),this.updateActiveClasses()},events:["resize"]},events:{beforeitemshow(t){!this.dragging&&this.sets&&this.stack.length<2&&!includes(this.sets,this.index)&&(this.index=this.getValidIndex());const i=Math.abs(this.index-this.prevIndex+(this.dir>0&&this.index<this.prevIndex||this.dir<0&&this.index>this.prevIndex?(this.maxIndex+1)*this.dir:0));if(!this.dragging&&i>1){for(let t=0;t<i;t++)this.stack.splice(1,0,this.dir>0?"next":"previous");return void t.preventDefault()}const s=this.dir<0||!this.slides[this.prevIndex]?this.index:this.prevIndex;this.duration=speedUp(this.avgWidth/this.velocity)*(dimensions(this.slides[s]).width/this.avgWidth),this.reorder()},itemshow(){~this.prevIndex&&addClass(this._getTransitioner().getItemIn(),this.clsActive)},itemshown(){this.updateActiveClasses()}},methods:{reorder(){if(this.finite)return void css(this.slides,"order","");const t=this.dir>0&&this.slides[this.prevIndex]?this.prevIndex:this.index;if(this.slides.forEach(((i,s)=>css(i,"order",this.dir>0&&s<t?1:this.dir<0&&s>=this.index?-1:""))),!this.center)return;const i=this.slides[t];let s=dimensions(this.list).width/2-dimensions(i).width/2,e=0;for(;s>0;){const i=this.getIndex(--e+t,t),n=this.slides[i];css(n,"order",i>t?-2:-1),s-=dimensions(n).width}},updateActiveClasses(){const t=this._getTransitioner(this.index).getActives(),i=[this.clsActive,(!this.sets||includes(this.sets,toFloat(this.index)))&&this.clsActivated||""];for(const s of this.slides){const e=includes(t,s);toggleClass(s,i,e),attr(s,"aria-hidden",!e),attr($$(selFocusable,s),"tabindex",e?null:-1)}},getValidIndex(t=this.index,i=this.prevIndex){if(t=this.getIndex(t,i),!this.sets)return t;let s;do{if(includes(this.sets,t))return t;s=t,t=this.getIndex(t+this.dir,i)}while(t!==s);return t},getAdjacentSlides(){const{width:t}=dimensions(this.list),i=-t,s=2*t,e=dimensions(this.slides[this.index]).width,n=this.center?t/2-e/2:0,r=new Set;for(const t of[-1,1]){let d=n+(t>0?e:0),h=0;do{const i=this.slides[this.getIndex(this.index+t+h++*t)];d+=dimensions(i).width*t,r.add(i)}while(this.length>h&&d>i&&d<s)}return Array.from(r)}}};function isFinite(t,i){if(!t||t.length<2)return!0;const{width:s}=dimensions(t);if(!i)return Math.ceil(getWidth(t))<Math.trunc(s+getMaxElWidth(t));const e=children(t),n=Math.trunc(s/2);for(const t in e){const i=e[t],s=dimensions(i).width,r=new Set([i]);let d=0;for(const i of[-1,1]){let h=s/2,l=0;for(;h<n;){const s=e[getIndex(+t+i+l++*i,e)];if(r.has(s))return!0;h+=dimensions(s).width,r.add(s)}d=Math.max(d,s/2+dimensions(e[getIndex(+t+i,e)]).width/2-(h-n))}if(d>sumBy(e.filter((t=>!r.has(t))),(t=>dimensions(t).width)))return!0}return!1}function getMaxElWidth(t){return Math.max(0,...children(t).map((t=>dimensions(t).width)))}
//# sourceMappingURL=/sm/64847d407aca350a5bb05622e5a16ff16a78f8e8dc31e4bbaa477448a386d582.map