/**
 * Minified by jsDelivr using Terser v5.15.1.
 * Original file: /npm/uikit@3.16.12/src/js/components/lightbox-panel.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import Animations from"./internal/lightbox-animations";import Modal from"../mixin/modal";import Slideshow from"../mixin/slideshow";import{keyMap}from"../util/keys";import{$,addClass,append,attr,fragment,getIndex,html,on,pointerDown,pointerMove,removeClass,Transition,trigger}from"uikit-util";export default{mixins:[Modal,Slideshow],functional:!0,props:{delayControls:Number,preload:Number,videoAutoplay:Boolean,template:String},data:()=>({preload:1,videoAutoplay:!1,delayControls:3e3,items:[],cls:"uk-open",clsPage:"uk-lightbox-page",selList:".uk-lightbox-items",attrItem:"uk-lightbox-item",selClose:".uk-close-large",selCaption:".uk-lightbox-caption",pauseOnHover:!1,velocity:2,Animations:Animations,template:'<div class="uk-lightbox uk-overflow-hidden">\n                        <ul class="uk-lightbox-items"></ul>\n                        <div class="uk-lightbox-toolbar uk-position-top uk-text-right uk-transition-slide-top uk-transition-opaque">\n                            <button class="uk-lightbox-toolbar-icon uk-close-large" type="button" uk-close></button>\n                         </div>\n                        <a class="uk-lightbox-button uk-position-center-left uk-position-medium uk-transition-fade" href uk-slidenav-previous uk-lightbox-item="previous"></a>\n                        <a class="uk-lightbox-button uk-position-center-right uk-position-medium uk-transition-fade" href uk-slidenav-next uk-lightbox-item="next"></a>\n                        <div class="uk-lightbox-toolbar uk-lightbox-caption uk-position-bottom uk-text-center uk-transition-slide-bottom uk-transition-opaque"></div>\n                    </div>'}),created(){const t=$(this.template),e=$(this.selList,t);this.items.forEach((()=>append(e,"<li>")));const i=$("[uk-close]",t),s=this.t("close");i&&s&&(i.dataset.i18n=JSON.stringify({label:s})),this.$mount(append(this.container,t))},computed:{caption:({selCaption:t},e)=>$(t,e)},events:[{name:`${pointerMove} ${pointerDown} keydown`,handler:"showControls"},{name:"click",self:!0,delegate(){return`${this.selList} > *`},handler(t){t.defaultPrevented||this.hide()}},{name:"shown",self:!0,handler(){this.showControls()}},{name:"hide",self:!0,handler(){this.hideControls(),removeClass(this.slides,this.clsActive),Transition.stop(this.slides)}},{name:"hidden",self:!0,handler(){this.$destroy(!0)}},{name:"keyup",el:()=>document,handler({keyCode:t}){if(!this.isToggled(this.$el)||!this.draggable)return;let e=-1;t===keyMap.LEFT?e="previous":t===keyMap.RIGHT?e="next":t===keyMap.HOME?e=0:t===keyMap.END&&(e="last"),~e&&this.show(e)}},{name:"beforeitemshow",handler(t){this.isToggled()||(this.draggable=!1,t.preventDefault(),this.toggleElement(this.$el,!0,!1),this.animation=Animations.scale,removeClass(t.target,this.clsActive),this.stack.splice(1,0,this.index))}},{name:"itemshow",handler(){html(this.caption,this.getItem().caption||"");for(let t=-this.preload;t<=this.preload;t++)this.loadItem(this.index+t)}},{name:"itemshown",handler(){this.draggable=this.$props.draggable}},{name:"itemload",async handler(t,e){const{source:i,type:s,alt:o="",poster:a,attrs:l={}}=e;if(this.setItem(e,"<span uk-spinner></span>"),!i)return;let n;const r={allowfullscreen:"",style:"max-width: 100%; box-sizing: border-box;","uk-responsive":"","uk-video":`${this.videoAutoplay}`};if("image"===s||i.match(/\.(avif|jpe?g|jfif|a?png|gif|svg|webp)($|\?)/i)){const t=createEl("img",{src:i,alt:o,...l});on(t,"load",(()=>this.setItem(e,t))),on(t,"error",(()=>this.setError(e)))}else if("video"===s||i.match(/\.(mp4|webm|ogv)($|\?)/i)){const t=createEl("video",{src:i,poster:a,controls:"",playsinline:"","uk-video":`${this.videoAutoplay}`,...l});on(t,"loadedmetadata",(()=>this.setItem(e,t))),on(t,"error",(()=>this.setError(e)))}else if("iframe"===s||i.match(/\.(html|php)($|\?)/i))this.setItem(e,createEl("iframe",{src:i,allowfullscreen:"",class:"uk-lightbox-iframe",...l}));else if(n=i.match(/\/\/(?:.*?youtube(-nocookie)?\..*?(?:[?&]v=|\/shorts\/)|youtu\.be\/)([\w-]{11})[&?]?(.*)?/))this.setItem(e,createEl("iframe",{src:`https://www.youtube${n[1]||""}.com/embed/${n[2]}${n[3]?`?${n[3]}`:""}`,width:1920,height:1080,...r,...l}));else if(n=i.match(/\/\/.*?vimeo\.[a-z]+\/(\d+)[&?]?(.*)?/))try{const{height:t,width:s}=await(await fetch(`https://vimeo.com/api/oembed.json?maxwidth=1920&url=${encodeURI(i)}`,{credentials:"omit"})).json();this.setItem(e,createEl("iframe",{src:`https://player.vimeo.com/video/${n[1]}${n[2]?`?${n[2]}`:""}`,width:s,height:t,...r,...l}))}catch(t){this.setError(e)}}}],methods:{loadItem(t=this.index){const e=this.getItem(t);this.getSlide(e).childElementCount||trigger(this.$el,"itemload",[e])},getItem(t=this.index){return this.items[getIndex(t,this.slides)]},setItem(t,e){trigger(this.$el,"itemloaded",[this,html(this.getSlide(t),e)])},getSlide(t){return this.slides[this.items.indexOf(t)]},setError(t){this.setItem(t,'<span uk-icon="icon: bolt; ratio: 2"></span>')},showControls(){clearTimeout(this.controlsTimer),this.controlsTimer=setTimeout(this.hideControls,this.delayControls),addClass(this.$el,"uk-active","uk-transition-active")},hideControls(){removeClass(this.$el,"uk-active","uk-transition-active")}}};function createEl(t,e){const i=fragment(`<${t}>`);return attr(i,e),i}
//# sourceMappingURL=/sm/412a560439a3adeff548ae65b9c886c73e3302ab019c482e9d6995a1112a873e.map