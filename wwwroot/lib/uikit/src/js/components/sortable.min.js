/**
 * Minified by jsDelivr using Terser v5.15.1.
 * Original file: /npm/uikit@3.16.12/src/js/components/sortable.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import Animate from"../mixin/animate";import Class from"../mixin/class";import{$,$$,addClass,append,assign,attr,before,children,css,findIndex,getEventPos,hasTouch,height,index,isEmpty,isInput,isTag,off,offsetViewport,on,parent,pointerDown,pointerMove,pointerUp,pointInRect,remove,removeClass,scrollParents,toggleClass,Transition,trigger,within}from"uikit-util";export default{mixins:[Class,Animate],props:{group:String,threshold:Number,clsItem:String,clsPlaceholder:String,clsDrag:String,clsDragState:String,clsBase:String,clsNoDrag:String,clsEmpty:String,clsCustom:String,handle:String},data:{group:!1,threshold:5,clsItem:"uk-sortable-item",clsPlaceholder:"uk-sortable-placeholder",clsDrag:"uk-sortable-drag",clsDragState:"uk-drag",clsBase:"uk-sortable",clsNoDrag:"uk-sortable-nodrag",clsEmpty:"uk-sortable-empty",clsCustom:"",handle:!1,pos:{}},created(){for(const t of["init","start","move","end"]){const e=this[t];this[t]=t=>{assign(this.pos,getEventPos(t)),e(t)}}},events:{name:pointerDown,passive:!1,handler:"init"},computed:{target(){return(this.$el.tBodies||[this.$el])[0]},items(){return children(this.target)},isEmpty(){return isEmpty(this.items)},handles({handle:t},e){return t?$$(t,e):this.items}},watch:{isEmpty(t){toggleClass(this.target,this.clsEmpty,t)},handles(t,e){css(e,{touchAction:"",userSelect:""}),css(t,{touchAction:hasTouch?"none":"",userSelect:"none"})}},update:{write(t){if(!this.drag||!parent(this.placeholder))return;const{pos:{x:e,y:s},origin:{offsetTop:i,offsetLeft:o},placeholder:r}=this;css(this.drag,{top:s-i,left:e-o});const n=this.getSortable(document.elementFromPoint(e,s));if(!n)return;const{items:l}=n;if(l.some(Transition.inProgress))return;const h=findTarget(l,{x:e,y:s});if(l.length&&(!h||h===r))return;const a=this.getSortable(r),c=findInsertTarget(n.target,h,r,e,s,n===a&&t.moved!==h);!1!==c&&(c&&r===c||(n!==a?(a.remove(r),t.moved=h):delete t.moved,n.insert(r,c),this.touched.add(n)))},events:["move"]},methods:{init(t){const{target:e,button:s,defaultPrevented:i}=t,[o]=this.items.filter((t=>within(e,t)));!o||i||s>0||isInput(e)||within(e,`.${this.clsNoDrag}`)||this.handle&&!within(e,this.handle)||(t.preventDefault(),this.touched=new Set([this]),this.placeholder=o,this.origin={target:e,index:index(o),...this.pos},on(document,pointerMove,this.move),on(document,pointerUp,this.end),this.threshold||this.start(t))},start(t){this.drag=appendDrag(this.$container,this.placeholder);const{left:e,top:s}=this.placeholder.getBoundingClientRect();assign(this.origin,{offsetLeft:this.pos.x-e,offsetTop:this.pos.y-s}),addClass(this.drag,this.clsDrag,this.clsCustom),addClass(this.placeholder,this.clsPlaceholder),addClass(this.items,this.clsItem),addClass(document.documentElement,this.clsDragState),trigger(this.$el,"start",[this,this.placeholder]),trackScroll(this.pos),this.move(t)},move(t){this.drag?this.$emit("move"):(Math.abs(this.pos.x-this.origin.x)>this.threshold||Math.abs(this.pos.y-this.origin.y)>this.threshold)&&this.start(t)},end(){if(off(document,pointerMove,this.move),off(document,pointerUp,this.end),!this.drag)return;untrackScroll();const t=this.getSortable(this.placeholder);this===t?this.origin.index!==index(this.placeholder)&&trigger(this.$el,"moved",[this,this.placeholder]):(trigger(t.$el,"added",[t,this.placeholder]),trigger(this.$el,"removed",[this,this.placeholder])),trigger(this.$el,"stop",[this,this.placeholder]),remove(this.drag),this.drag=null;for(const{clsPlaceholder:t,clsItem:e}of this.touched)for(const s of this.touched)removeClass(s.items,t,e);this.touched=null,removeClass(document.documentElement,this.clsDragState)},insert(t,e){addClass(this.items,this.clsItem);this.animate((()=>e?before(e,t):append(this.target,t)))},remove(t){within(t,this.target)&&this.animate((()=>remove(t)))},getSortable(t){do{const e=this.$getComponent(t,"sortable");if(e&&(e===this||!1!==this.group&&e.group===this.group))return e}while(t=parent(t))}}};let trackTimer;function trackScroll(t){let e=Date.now();trackTimer=setInterval((()=>{let{x:s,y:i}=t;i+=document.scrollingElement.scrollTop;const o=.3*(Date.now()-e);e=Date.now(),scrollParents(document.elementFromPoint(s,t.y)).reverse().some((t=>{let{scrollTop:e,scrollHeight:s}=t;const{top:r,bottom:n,height:l}=offsetViewport(t);if(r<i&&r+35>i)e-=o;else{if(!(n>i&&n-35<i))return;e+=o}if(e>0&&e<s-l)return t.scrollTop=e,!0}))}),15)}function untrackScroll(){clearInterval(trackTimer)}function appendDrag(t,e){let s;if(isTag(e,"li","tr")){s=$("<div>"),append(s,e.cloneNode(!0).children);for(const t of e.getAttributeNames())attr(s,t,e.getAttribute(t))}else s=e.cloneNode(!0);return append(t,s),css(s,"margin","0","important"),css(s,{boxSizing:"border-box",width:e.offsetWidth,height:e.offsetHeight,padding:css(e,"padding")}),height(s.firstElementChild,height(e.firstElementChild)),s}function findTarget(t,e){return t[findIndex(t,(t=>pointInRect(e,t.getBoundingClientRect())))]}function findInsertTarget(t,e,s,i,o,r){if(!children(t).length)return;const n=e.getBoundingClientRect();if(!r)return isHorizontal(t,s)||o<n.top+n.height/2?e:e.nextElementSibling;const l=s.getBoundingClientRect(),h=linesIntersect([n.top,n.bottom],[l.top,l.bottom]),[a,c,d,g]=h?[i,"width","left","right"]:[o,"height","top","bottom"],m=l[c]<n[c]?n[c]-l[c]:0;return l[d]<n[d]?!(m&&a<n[d]+m)&&e.nextElementSibling:!(m&&a>n[g]-m)&&e}function isHorizontal(t,e){const s=1===children(t).length;s&&append(t,e);const i=children(t),o=i.some(((t,e)=>{const s=t.getBoundingClientRect();return i.slice(e+1).some((t=>{const e=t.getBoundingClientRect();return!linesIntersect([s.left,s.right],[e.left,e.right])}))}));return s&&remove(e),o}function linesIntersect(t,e){return t[1]>e[0]&&e[1]>t[0]}
//# sourceMappingURL=/sm/e6015b63ff85a8bf7488711fcdc7e5a91f423c0c3ca13c34ce8f25f89fcbec16.map