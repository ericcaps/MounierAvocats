/**
 * Minified by jsDelivr using Terser v5.15.1.
 * Original file: /npm/uikit@3.16.12/src/js/components/filter.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import Animate from"../mixin/animate";import{parseOptions}from"../api/options";import{$,$$,append,attr,closest,css,data,each,fastdom,children as getChildren,hasClass,includes,isEmpty,isEqual,isTag,isUndefined,matches,toggleClass,trigger}from"uikit-util";import{keyMap}from"../util/keys";export default{mixins:[Animate],args:"target",props:{target:Boolean,selActive:Boolean},data:{target:null,selActive:!1,attrItem:"uk-filter-control",cls:"uk-active",duration:250},computed:{toggles:({attrItem:t},e)=>$$(`[${t}],[data-${t}]`,e),children:({target:t},e)=>$$(`${t} > *`,e)},watch:{toggles(t){this.updateState();const e=$$(this.selActive,this.$el);for(const i of t){!1!==this.selActive&&toggleClass(i,this.cls,includes(e,i));const t=findButton(i);isTag(t,"a")&&attr(t,"role","button")}},children(t,e){e&&this.updateState()}},events:{name:"click keydown",delegate(){return`[${this.attrItem}],[data-${this.attrItem}]`},handler(t){"keydown"===t.type&&t.keyCode!==keyMap.SPACE||closest(t.target,"a,button")&&(t.preventDefault(),this.apply(t.current))}},methods:{apply(t){const e=this.getState(),i=mergeState(t,this.attrItem,this.getState());isEqualState(e,i)||this.setState(i)},getState(){return this.toggles.filter((t=>hasClass(t,this.cls))).reduce(((t,e)=>mergeState(e,this.attrItem,t)),{filter:{"":""},sort:[]})},async setState(t,e=!0){t={filter:{"":""},sort:[],...t},trigger(this.$el,"beforeFilter",[this,t]);for(const e of this.toggles)toggleClass(e,this.cls,matchFilter(e,this.attrItem,t));await Promise.all($$(this.target,this.$el).map((i=>{const s=()=>{applyState(t,i,getChildren(i)),this.$update(this.$el)};return e?this.animate(s,i):s()}))),trigger(this.$el,"afterFilter",[this])},updateState(){fastdom.write((()=>this.setState(this.getState(),!1)))}}};function getFilter(t,e){return parseOptions(data(t,e),["filter"])}function isEqualState(t,e){return["filter","sort"].every((i=>isEqual(t[i],e[i])))}function applyState(t,e,i){const s=getSelector(t);i.forEach((t=>css(t,"display",s&&!matches(t,s)?"none":"")));const[r,a]=t.sort;if(r){const t=sortItems(i,r,a);isEqual(t,i)||append(e,t)}}function mergeState(t,e,i){const{filter:s,group:r,sort:a,order:l="asc"}=getFilter(t,e);return(s||isUndefined(a))&&(r?s?(delete i.filter[""],i.filter[r]=s):(delete i.filter[r],(isEmpty(i.filter)||""in i.filter)&&(i.filter={"":s||""})):i.filter={"":s||""}),isUndefined(a)||(i.sort=[a,l]),i}function matchFilter(t,e,{filter:i={"":""},sort:[s,r]}){const{filter:a="",group:l="",sort:o,order:n="asc"}=getFilter(t,e);return isUndefined(o)?l in i&&a===i[l]||!a&&l&&!(l in i)&&!i[""]:s===o&&r===n}function getSelector({filter:t}){let e="";return each(t,(t=>e+=t||"")),e}function sortItems(t,e,i){return[...t].sort(((t,s)=>data(t,e).localeCompare(data(s,e),void 0,{numeric:!0})*("asc"===i||-1)))}function findButton(t){return $("a,button",t)||t}
//# sourceMappingURL=/sm/2edb6c1e2390d9c1f05170f23347278d090faedd429a752b68feebd58144c83a.map